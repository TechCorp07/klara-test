/* 
  Enhanced mobile optimization styles for Klararety Healthcare
  This file is meant to be loaded conditionally for mobile devices
*/

/* Mobile optimization variables */
:root {
  --mobile-touch-target-size: 44px;
  --mobile-spacing: 16px;
  --mobile-font-size-small: 14px;
  --mobile-font-size-base: 16px;
  --mobile-font-size-large: 18px;
  --mobile-font-size-xlarge: 20px;
  --mobile-font-size-xxlarge: 24px;
}

/* Apply mobile optimizations to all elements in mobile view */
.mobile-optimized {
  /* Ensure proper viewport behavior */
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

/* Touch-friendly UI controls */
.mobile-optimized button,
.mobile-optimized .btn,
.mobile-optimized .form-control,
.mobile-optimized .nav-link,
.mobile-optimized .dropdown-item,
.mobile-optimized input[type="checkbox"],
.mobile-optimized input[type="radio"],
.mobile-optimized select {
  min-height: var(--mobile-touch-target-size);
  min-width: var(--mobile-touch-target-size);
  padding: 12px 16px;
  touch-action: manipulation;
}

/* Enhance form inputs for touch */
.mobile-optimized input[type="checkbox"],
.mobile-optimized input[type="radio"] {
  width: 24px;
  height: 24px;
}

/* Improved spacing for mobile */
.mobile-optimized .card,
.mobile-optimized .dashboard-card {
  margin-bottom: var(--mobile-spacing);
  padding: var(--mobile-spacing);
}

.mobile-optimized .form-group,
.mobile-optimized .mb-3,
.mobile-optimized .mb-4 {
  margin-bottom: var(--mobile-spacing);
}

/* Improved spacing between elements */
.mobile-optimized p,
.mobile-optimized h1, 
.mobile-optimized h2, 
.mobile-optimized h3,
.mobile-optimized h4, 
.mobile-optimized h5, 
.mobile-optimized h6 {
  margin-bottom: var(--mobile-spacing);
}

/* Responsive tables for mobile */
.mobile-optimized .table-responsive-mobile {
  display: block;
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Card-based table alternative for very small screens */
.mobile-optimized .table-card-view .table-header {
  display: none;
}

.mobile-optimized .table-card-view .table-row {
  display: block;
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  padding: var(--mobile-spacing);
  margin-bottom: var(--mobile-spacing);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.mobile-optimized .table-card-view .table-cell {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid hsl(var(--border));
}

.mobile-optimized .table-card-view .table-cell:last-child {
  border-bottom: none;
}

.mobile-optimized .table-card-view .cell-label {
  font-weight: bold;
  margin-right: 1rem;
}

/* Optimized form controls for touch */
.mobile-optimized .form-control,
.mobile-optimized .form-select,
.mobile-optimized .form-input,
.mobile-optimized .auth-form-input {
  font-size: var(--mobile-font-size-base);
  height: auto;
  padding: 12px 16px;
}

.mobile-optimized .form-check-input {
  width: 24px;
  height: 24px;
  margin-top: 0;
}

.mobile-optimized .form-check-label {
  padding-left: 12px;
  line-height: 24px;
}

/* Improved button sizing and spacing for touch */
.mobile-optimized .btn,
.mobile-optimized .form-button,
.mobile-optimized .auth-form-button {
  font-size: var(--mobile-font-size-base);
  padding: 12px 20px;
  border-radius: var(--radius);
  display: flex;
  justify-content: center;
  align-items: center;
}

.mobile-optimized .btn-group .btn {
  padding: 12px 16px;
}

.mobile-optimized .btn-sm {
  padding: 8px 12px;
}

/* Healthcare-specific mobile optimizations */
.mobile-optimized .patient-card {
  padding: var(--mobile-spacing);
  margin-bottom: var(--mobile-spacing);
}

.mobile-optimized .vital-sign {
  margin-bottom: var(--mobile-spacing);
}

.mobile-optimized .medical-timeline {
  margin-left: 0;
  padding-left: 24px;
}

.mobile-optimized .medical-timeline-item::before {
  width: 12px;
  height: 12px;
  left: -18px;
}

/* Improved modal sizing for mobile */
.mobile-optimized .modal {
  padding: 0.5rem;
}

.mobile-optimized .modal-dialog {
  margin: 0.5rem;
  max-width: none;
}

.mobile-optimized .modal-content {
  border-radius: var(--radius);
}

.mobile-optimized .modal-header,
.mobile-optimized .modal-footer {
  padding: var(--mobile-spacing);
}

.mobile-optimized .modal-body {
  padding: 20px var(--mobile-spacing);
}

/* Improved navigation for mobile */
.mobile-optimized .nav-link {
  padding: 12px 16px;
}

.mobile-optimized .dropdown-menu {
  padding: 8px 0;
}

.mobile-optimized .dropdown-item {
  padding: 12px 20px;
}

/* Optimized card layouts for mobile */
.mobile-optimized .card-header,
.mobile-optimized .card-footer {
  padding: var(--mobile-spacing);
}

.mobile-optimized .card-body {
  padding: 20px var(--mobile-spacing);
}

/* Improved list groups for mobile */
.mobile-optimized .list-group-item {
  padding: var(--mobile-spacing);
}

/* Loading indicators optimized for mobile */
.mobile-optimized .loading-indicator {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100px;
  padding: var(--mobile-spacing);
}

/* Skeleton loading placeholders */
.mobile-optimized .skeleton-loader {
  background: linear-gradient(90deg, 
    hsl(var(--muted)) 25%, 
    hsl(var(--muted)/0.8) 50%, 
    hsl(var(--muted)) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: var(--radius);
  height: 24px;
  margin-bottom: 8px;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Optimized font sizes for readability on mobile */
.mobile-optimized h1,
.mobile-optimized .text-3xl {
  font-size: var(--mobile-font-size-xxlarge);
}

.mobile-optimized h2,
.mobile-optimized .text-2xl {
  font-size: var(--mobile-font-size-xlarge);
}

.mobile-optimized h3,
.mobile-optimized .text-xl {
  font-size: var(--mobile-font-size-large);
}

.mobile-optimized p,
.mobile-optimized .text-base {
  font-size: var(--mobile-font-size-base);
}

.mobile-optimized .text-sm,
.mobile-optimized .small {
  font-size: var(--mobile-font-size-small);
}

/* Improved spacing for content sections */
.mobile-optimized section,
.mobile-optimized .content-section {
  margin-bottom: 1.5rem;
}

/* Optimized pagination for touch */
.mobile-optimized .pagination .page-link {
  min-width: var(--mobile-touch-target-size);
  min-height: var(--mobile-touch-target-size);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Improved alerts for mobile */
.mobile-optimized .alert {
  padding: var(--mobile-spacing);
  margin-bottom: var(--mobile-spacing);
}

/* HIPAA banner optimization for mobile */
.mobile-optimized .hipaa-banner {
  padding: var(--mobile-spacing);
  margin-bottom: var(--mobile-spacing);
}

/* Improved tabs for mobile */
.mobile-optimized .tabs .tab {
  padding: 12px 16px;
}

/* Improved accordion for mobile */
.mobile-optimized .accordion-button {
  padding: var(--mobile-spacing);
  font-size: var(--mobile-font-size-base);
}

.mobile-optimized .accordion-body {
  padding: var(--mobile-spacing);
}

/* Optimized data loading for mobile */
.mobile-optimized .lazy-load-trigger {
  height: 20px;
  margin: 1.5rem 0;
}

/* Pull-to-refresh indicator */
.mobile-optimized .pull-to-refresh {
  text-align: center;
  height: 50px;
  line-height: 50px;
}

/* Offline indicator */
.mobile-optimized .offline-indicator {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background-color: hsl(var(--destructive) / 0.15);
  color: hsl(var(--destructive));
  text-align: center;
  padding: 8px;
  z-index: 1050;
}

/* Chart containers optimized for mobile */
.mobile-optimized .chart-container {
  height: 250px;
  margin-bottom: var(--mobile-spacing);
}

/* Mobile EHR-specific optimizations */
.mobile-optimized .ehr-patient-header {
  flex-direction: column;
  align-items: flex-start;
}

.mobile-optimized .ehr-patient-avatar {
  margin-bottom: var(--mobile-spacing);
}

.mobile-optimized .device-card {
  flex-direction: column;
  align-items: flex-start;
}

.mobile-optimized .device-icon {
  margin-bottom: 1rem;
}

/* Media queries for different device sizes */
@media (max-width: 640px) {
  /* Small mobile screens */
  .mobile-optimized .hide-xs {
    display: none;
  }
  
  .mobile-optimized .dashboard-content {
    padding: 12px;
  }
  
  .mobile-optimized .chart-container {
    height: 200px;
  }
}

@media (min-width: 641px) and (max-width: 768px) {
  /* Medium mobile screens */
  .mobile-optimized .hide-sm {
    display: none;
  }
}

/* Add helper class to show when mobile optimization is active */
.mobile-optimized::before {
  content: '';
  position: fixed;
  bottom: 0;
  left: 0;
  width: 5px;
  height: 5px;
  background-color: transparent;
  z-index: -1;
}

/* Optimization for touch-based forms that require higher precision */
.mobile-optimized .precision-form .form-input {
  font-size: 16px; /* iOS prevents zoom on focus when font size is 16px or larger */
}

/* Prevent iOS zoom on form focus */
@media screen and (max-width: 768px) {
  .mobile-optimized input[type="text"],
  .mobile-optimized input[type="number"],
  .mobile-optimized input[type="email"],
  .mobile-optimized input[type="tel"],
  .mobile-optimized input[type="password"],
  .mobile-optimized select,
  .mobile-optimized textarea {
    font-size: 16px;
  }
}